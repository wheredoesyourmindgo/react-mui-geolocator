{"version":3,"file":"index.umd.js","sources":["../src/MatGeolocator/MatGeolocator.tsx"],"sourcesContent":["import React, {useState, useMemo, useCallback} from 'react';\nimport {\n  Fab,\n  FabProps,\n  CircularProgress,\n  CircularProgressProps,\n} from '@mui/material';\nimport GpsFixedIcon from '@mui/icons-material/GpsFixed';\n\nconst DEFAULT_TIMEOUT = 15000;\n\ntype Props = {\n  onClick: (coords: GeolocationCoordinates) => void;\n  classes: any;\n  timeout?: number;\n  onGeolocateError?: (error: GeolocationPositionError) => void;\n  circularProgressProps?: Partial<CircularProgressProps>;\n} & Partial<FabProps>;\n\nconst MatGeoLocator = ({\n  classes,\n  timeout = DEFAULT_TIMEOUT,\n  size = 'small',\n  onClick,\n  onGeolocateError,\n  circularProgressProps,\n  ...rest\n}: Props) => {\n  const [locating, setLocating] = useState(false);\n\n  /**\n   * Geo-locate user position. Timeout and error after 15 seconds; default is set to run indefinitely.\n   */\n  const locate = useCallback(() => {\n    setLocating(true);\n    // https://developer.mozilla.org/en-US/docs/Web/API/Geolocation/Using_geolocation\n    navigator.geolocation.getCurrentPosition(\n      ({coords}) => {\n        setLocating(false);\n        onClick(coords);\n      },\n      (error) => {\n        setLocating(false);\n        onGeolocateError?.(error);\n      },\n      {enableHighAccuracy: false, maximumAge: 0, timeout: timeout}\n    );\n  }, [onClick, onGeolocateError, timeout]);\n\n  const progress = useMemo(() => {\n    const {\n      className: classNameProp,\n      sx,\n      ...props\n    } = circularProgressProps ?? {};\n    return (\n      locating && (\n        <CircularProgress\n          size={48}\n          sx={{\n            color: 'secondary.main',\n            position: 'absolute',\n            top: '-4px',\n            left: '-4px',\n            zIndex: 1,\n            ...sx,\n          }}\n          {...props}\n        />\n      )\n    );\n  }, [locating, circularProgressProps]);\n\n  return (\n    <>\n      <Fab\n        size={size}\n        aria-label=\"geolocate control\"\n        onClick={locate}\n        {...rest}\n      >\n        <GpsFixedIcon />\n      </Fab>\n      {progress}\n    </>\n  );\n};\n\nexport default MatGeoLocator;\n"],"names":["classes","timeout","size","onClick","onGeolocateError","circularProgressProps","rest","useState","locating","setLocating","locate","useCallback","navigator","geolocation","getCurrentPosition","coords","error","enableHighAccuracy","maximumAge","progress","useMemo","sx","props","React","CircularProgress","color","position","top","left","zIndex","Fab","aria-label","GpsFixedIcon"],"mappings":"y0BAmBsB,YACpBA,QACAC,QAAAA,aAZsB,WAatBC,KAAAA,aAAO,UACPC,IAAAA,QACAC,IAAAA,iBACAC,IAAAA,sBACGC,2FAE6BC,YAAS,GAAlCC,OAAUC,OAKXC,EAASC,cAAY,WACzBF,GAAY,GAEZG,UAAUC,YAAYC,mBACpB,gBAAEC,IAAAA,OACAN,GAAY,GACZN,EAAQY,IAEV,SAACC,GACCP,GAAY,SACZL,GAAAA,EAAmBY,IAErB,CAACC,oBAAoB,EAAOC,WAAY,EAAGjB,QAASA,KAErD,CAACE,EAASC,EAAkBH,IAEzBkB,EAAWC,UAAQ,uBAKnBf,EAAAA,EAAyB,GAF3BgB,IAAAA,GACGC,0BAEL,OACEd,GACEe,wBAACC,sBACCtB,KAAM,GACNmB,MACEI,MAAO,iBACPC,SAAU,WACVC,IAAK,OACLC,KAAM,OACNC,OAAQ,GACLR,IAEDC,KAIT,CAACd,EAAUH,IAEd,OACEkB,gDACEA,wBAACO,SACC5B,KAAMA,EACN6B,aAAW,oBACX5B,QAASO,GACLJ,GAEJiB,wBAACS,iBAEFb"}